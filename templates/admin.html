<!-- Admin ページ -->
{# admin.html #}
{% extends "base.html" %}

{% block title %}Admin - Todo-App{% endblock %}
{% block content %}
<!-- HEADER -->
<header>
    <h2 id="main-title">Admin Todo-App</h2>
</header>

<!-- MAIN CONTENTS -->
<section id="contents">
    <article class="cards">
        <!-- CATEGORY -->
        <div class="card">
            {% include "category.html" %}
        </div>    
        <!-- TASK -->    
        <div class="card">
            {% include "task.html" %}
        </div>
        <!-- PROGRESS -->
        <div class="card">
            {% include "progress.html" %}
        </div>
        <!-- ARCHIVE -->
        <div class="card">
            {% include "archive.html" %}
        </div>
    </article>
</section>
{% endblock %}

<!-- JavaScriptの読み込み -->
{% block scripts %}
    <!-- Sortable.jsライブラリを最初に読み込み -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    
    <script id="all-posts-data" type="application/json">
        {{ category_posts | tojson | safe }}
    </script>
    <script id="posts-by-status-data" type="application/json">
        {{ posts_by_status | tojson | safe }}
    </script>

    <!-- 基盤機能（順序重要） -->
    <script src="{{ url_for('static', filename='js/core/data-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='js/utils/task-renderer.js') }}"></script>
    <script src="{{ url_for('static', filename='js/core/modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/core/delete-mode.js') }}"></script>
    <script src="{{ url_for('static', filename='js/core/sortable.js') }}"></script>

    <!-- 機能別スクリプト -->
    <script src="{{ url_for('static', filename='js/features/category-switcher.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/category-creator.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/category-deleter.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/task-creator.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/task-editor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/task-deleter.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/task-mover.js') }}"></script>

    <!-- ユーティリティ -->
    <script src="{{ url_for('static', filename='js/utils/textarea-counter.js') }}"></script>
{% endblock %}